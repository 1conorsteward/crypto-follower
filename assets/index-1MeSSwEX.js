import{C as $,a as A,L as _,P as O,b as R,p as T,c as F,d as H,e as S,r as i,j as e,f as M,g as v,h as U}from"./vendor-CR5vm7Vg.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();$.register(A,_,O,R,T,F,H);const q=10*60*1e3,b=1200;let j=0;const w=async t=>{const a=Date.now()-j;return a<b&&await new Promise(n=>setTimeout(n,b-a)),j=Date.now(),t()},N=async(t,c)=>{const a=localStorage.getItem(t);if(a){const{data:s,timestamp:r}=JSON.parse(a);if(Date.now()-r<q)return console.log(`Serving cached data for ${t}`),s}const n=await c();return localStorage.setItem(t,JSON.stringify({data:n,timestamp:Date.now()})),n},I=t=>{const c={},a={};t.forEach(([s,r])=>{const d=new Date(s),o=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;c[o]||(c[o]=0,a[o]=0),c[o]+=r,a[o]+=1});const n={};return Object.keys(c).forEach(s=>{n[s]=(c[s]/a[s]).toFixed(2)}),n},D=({coinId:t})=>{const[c,a]=i.useState(null),[n,s]=i.useState(null),[r,d]=i.useState(null),[o,m]=i.useState(null),[l,y]=i.useState(null);return i.useEffect(()=>{(async()=>{try{const p=await N(t,async()=>{const u=await w(()=>v.get("https://api.coingecko.com/api/v3/coins/${coinId}/market_chart",{params:{vs_currency:"usd",days:"90",interval:"daily"}})),{prices:x}=u.data,L=I(x);return{prices:x,monthlyAverages:L}}),g=p.prices.map(u=>new Date(u[0]).toLocaleDateString()),h=p.prices.map(u=>u[1]),P=(h.reduce((u,x)=>u+x,0)/h.length).toFixed(2);d(P),a({labels:g,datasets:[{label:`${t.toUpperCase()} Historical Prices (USD)`,data:h,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0}]}),s(null)}catch(p){console.error("Error fetching historical data:",p.message),s("Failed to fetch historical chart data")}})()},[t]),i.useEffect(()=>{(async()=>{try{const p=await N(`${t}_live`,async()=>{var h;return((h=(await w(()=>v.get("https://api.coingecko.com/api/v3/simple/price",{params:{ids:t,vs_currencies:"usd"}}))).data[t])==null?void 0:h.usd)||null});if(m(p),r&&p){const g=((p-r)/r*100).toFixed(2);y(g)}}catch(p){console.error("Error fetching live price:",p.message)}})()},[t,r]),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg text-white",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:[t.toUpperCase()," Historical Chart"]}),n?e.jsx("p",{className:"text-red-400",children:n}):c?e.jsxs("div",{children:[e.jsx("div",{className:"w-full max-w-screen-lg mx-auto h-96 overflow-hidden mb-4",children:e.jsx(M,{data:c,options:{responsive:!0,maintainAspectRatio:!1}})}),e.jsx("div",{className:"text-center mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold",children:["Average Monthly Cost: ",e.jsxs("span",{className:"text-blue-400",children:["$",r]})]})}),o&&l&&e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Current Price: ",e.jsxs("span",{className:"text-green-400",children:["$",o]})]}),e.jsx("p",{className:`text-xl font-bold ${l>=0?"text-green-400":"text-red-400"}`,children:l>=0?`${l}% ↑`:`${Math.abs(l)}% ↓`})]})]}):e.jsx("p",{children:"Loading..."})]})};D.propTypes={coinId:S.string.isRequired};const J=10*60*1e3,C={},E=({coinId:t})=>{const[c,a]=i.useState(null),[n,s]=i.useState(null);return i.useEffect(()=>{const r=async()=>{var m;const o=C[t];if(o&&Date.now()-o.timestamp<J){console.log(`Serving cached live price for ${t}`),a(o.price);return}try{console.log(`Fetching live price for ${t}`);const l=await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${t}&vs_currencies=usd`);if(!l.ok)throw new Error(`API response error: ${l.status}`);const f=((m=(await l.json())[t])==null?void 0:m.usd)||"N/A";C[t]={price:f,timestamp:Date.now()},a(f),s(null)}catch(l){console.error("Error fetching live price:",l.message),s("Failed to fetch live price")}};r();const d=setInterval(r,3e4);return()=>clearInterval(d)},[t]),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg text-center",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:[t.toUpperCase()," Live Price"]}),n?e.jsx("p",{className:"text-red-400",children:n}):e.jsxs("p",{className:"text-3xl font-bold",children:["$",c]})]})};E.propTypes={coinId:S.string.isRequired};const k=()=>{const[t,c]=i.useState("bitcoin");return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[e.jsx("header",{className:"text-center mb-6",children:e.jsx("h1",{className:"text-4xl font-bold text-blue-400",children:"Crypto Dashboard"})}),e.jsx("nav",{className:"flex justify-center space-x-4 mb-6",children:["bitcoin","ethereum","tellor"].map(a=>e.jsx("button",{onClick:()=>c(a),className:`px-4 py-2 rounded-lg font-semibold transition ${t===a?"bg-blue-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),e.jsxs("main",{className:"container mx-auto space-y-8",children:[e.jsx("section",{children:e.jsx(D,{coinId:t})}),e.jsx("section",{children:e.jsx(E,{coinId:t})})]})]})};function B(){return e.jsx("div",{children:e.jsx(k,{})})}U.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(B,{})}));
